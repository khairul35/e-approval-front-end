{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { onBeforeUnmount, ref, watch, onMounted } from 'vue';\nimport raf from '../../_util/raf';\nvar StatusQueue = ['measure', 'align', null, 'motion'];\nexport default (function (visible, doMeasure) {\n  var status = ref(null);\n  var rafRef = ref();\n  var destroyRef = ref(false);\n  function setStatus(nextStatus) {\n    if (!destroyRef.value) {\n      status.value = nextStatus;\n    }\n  }\n  function cancelRaf() {\n    raf.cancel(rafRef.value);\n  }\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.value = raf(function () {\n      // Only align should be manually trigger\n      var newStatus = status.value;\n      switch (status.value) {\n        case 'align':\n          newStatus = 'motion';\n          break;\n        case 'motion':\n          newStatus = 'stable';\n          break;\n        default:\n      }\n      setStatus(newStatus);\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  }\n  watch(visible, function () {\n    setStatus('measure');\n  }, {\n    immediate: true,\n    flush: 'post'\n  });\n  onMounted(function () {\n    // Go next status\n    watch(status, function () {\n      switch (status.value) {\n        case 'measure':\n          doMeasure();\n          break;\n        default:\n      }\n      if (status.value) {\n        rafRef.value = raf( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var index, nextStatus;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                index = StatusQueue.indexOf(status.value);\n                nextStatus = StatusQueue[index + 1];\n                if (nextStatus && index !== -1) {\n                  setStatus(nextStatus);\n                }\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        })));\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n  });\n  onBeforeUnmount(function () {\n    destroyRef.value = true;\n    cancelRaf();\n  });\n  return [status, goNextStatus];\n});","map":{"version":3,"names":["_asyncToGenerator","_regeneratorRuntime","onBeforeUnmount","ref","watch","onMounted","raf","StatusQueue","visible","doMeasure","status","rafRef","destroyRef","setStatus","nextStatus","value","cancelRaf","cancel","goNextStatus","callback","newStatus","immediate","flush","mark","_callee","index","wrap","_callee$","_context","prev","next","indexOf","stop"],"sources":["/Users/dev/e-approver/node_modules/ant-design-vue/es/vc-trigger/Popup/useVisibleStatus.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { onBeforeUnmount, ref, watch, onMounted } from 'vue';\nimport raf from '../../_util/raf';\nvar StatusQueue = ['measure', 'align', null, 'motion'];\nexport default (function (visible, doMeasure) {\n  var status = ref(null);\n  var rafRef = ref();\n  var destroyRef = ref(false);\n  function setStatus(nextStatus) {\n    if (!destroyRef.value) {\n      status.value = nextStatus;\n    }\n  }\n  function cancelRaf() {\n    raf.cancel(rafRef.value);\n  }\n  function goNextStatus(callback) {\n    cancelRaf();\n    rafRef.value = raf(function () {\n      // Only align should be manually trigger\n      var newStatus = status.value;\n      switch (status.value) {\n        case 'align':\n          newStatus = 'motion';\n          break;\n        case 'motion':\n          newStatus = 'stable';\n          break;\n        default:\n      }\n      setStatus(newStatus);\n      callback === null || callback === void 0 ? void 0 : callback();\n    });\n  }\n  watch(visible, function () {\n    setStatus('measure');\n  }, {\n    immediate: true,\n    flush: 'post'\n  });\n  onMounted(function () {\n    // Go next status\n    watch(status, function () {\n      switch (status.value) {\n        case 'measure':\n          doMeasure();\n          break;\n        default:\n      }\n      if (status.value) {\n        rafRef.value = raf( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var index, nextStatus;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                index = StatusQueue.indexOf(status.value);\n                nextStatus = StatusQueue[index + 1];\n                if (nextStatus && index !== -1) {\n                  setStatus(nextStatus);\n                }\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        })));\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n  });\n  onBeforeUnmount(function () {\n    destroyRef.value = true;\n    cancelRaf();\n  });\n  return [status, goNextStatus];\n});"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,6CAA6C;AAC3E,OAAOC,mBAAmB,MAAM,4BAA4B;AAC5D,SAASC,eAAe,EAAEC,GAAG,EAAEC,KAAK,EAAEC,SAAS,QAAQ,KAAK;AAC5D,OAAOC,GAAG,MAAM,iBAAiB;AACjC,IAAIC,WAAW,GAAG,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,CAAC;AACtD,gBAAgB,UAAUC,OAAO,EAAEC,SAAS,EAAE;EAC5C,IAAIC,MAAM,GAAGP,GAAG,CAAC,IAAI,CAAC;EACtB,IAAIQ,MAAM,GAAGR,GAAG,EAAE;EAClB,IAAIS,UAAU,GAAGT,GAAG,CAAC,KAAK,CAAC;EAC3B,SAASU,SAASA,CAACC,UAAU,EAAE;IAC7B,IAAI,CAACF,UAAU,CAACG,KAAK,EAAE;MACrBL,MAAM,CAACK,KAAK,GAAGD,UAAU;IAC3B;EACF;EACA,SAASE,SAASA,CAAA,EAAG;IACnBV,GAAG,CAACW,MAAM,CAACN,MAAM,CAACI,KAAK,CAAC;EAC1B;EACA,SAASG,YAAYA,CAACC,QAAQ,EAAE;IAC9BH,SAAS,EAAE;IACXL,MAAM,CAACI,KAAK,GAAGT,GAAG,CAAC,YAAY;MAC7B;MACA,IAAIc,SAAS,GAAGV,MAAM,CAACK,KAAK;MAC5B,QAAQL,MAAM,CAACK,KAAK;QAClB,KAAK,OAAO;UACVK,SAAS,GAAG,QAAQ;UACpB;QACF,KAAK,QAAQ;UACXA,SAAS,GAAG,QAAQ;UACpB;QACF;MAAQ;MAEVP,SAAS,CAACO,SAAS,CAAC;MACpBD,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,EAAE;IAChE,CAAC,CAAC;EACJ;EACAf,KAAK,CAACI,OAAO,EAAE,YAAY;IACzBK,SAAS,CAAC,SAAS,CAAC;EACtB,CAAC,EAAE;IACDQ,SAAS,EAAE,IAAI;IACfC,KAAK,EAAE;EACT,CAAC,CAAC;EACFjB,SAAS,CAAC,YAAY;IACpB;IACAD,KAAK,CAACM,MAAM,EAAE,YAAY;MACxB,QAAQA,MAAM,CAACK,KAAK;QAClB,KAAK,SAAS;UACZN,SAAS,EAAE;UACX;QACF;MAAQ;MAEV,IAAIC,MAAM,CAACK,KAAK,EAAE;QAChBJ,MAAM,CAACI,KAAK,GAAGT,GAAG,EAAE,aAAaN,iBAAiB,EAAE,aAAaC,mBAAmB,CAACsB,IAAI,CAAC,SAASC,OAAOA,CAAA,EAAG;UAC3G,IAAIC,KAAK,EAAEX,UAAU;UACrB,OAAOb,mBAAmB,CAACyB,IAAI,CAAC,SAASC,QAAQA,CAACC,QAAQ,EAAE;YAC1D,OAAO,CAAC,EAAE,QAAQA,QAAQ,CAACC,IAAI,GAAGD,QAAQ,CAACE,IAAI;cAC7C,KAAK,CAAC;gBACJL,KAAK,GAAGlB,WAAW,CAACwB,OAAO,CAACrB,MAAM,CAACK,KAAK,CAAC;gBACzCD,UAAU,GAAGP,WAAW,CAACkB,KAAK,GAAG,CAAC,CAAC;gBACnC,IAAIX,UAAU,IAAIW,KAAK,KAAK,CAAC,CAAC,EAAE;kBAC9BZ,SAAS,CAACC,UAAU,CAAC;gBACvB;cACF,KAAK,CAAC;cACN,KAAK,KAAK;gBACR,OAAOc,QAAQ,CAACI,IAAI,EAAE;YAAC;UAE7B,CAAC,EAAER,OAAO,CAAC;QACb,CAAC,CAAC,CAAC,CAAC;MACN;IACF,CAAC,EAAE;MACDH,SAAS,EAAE,IAAI;MACfC,KAAK,EAAE;IACT,CAAC,CAAC;EACJ,CAAC,CAAC;EACFpB,eAAe,CAAC,YAAY;IAC1BU,UAAU,CAACG,KAAK,GAAG,IAAI;IACvBC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAO,CAACN,MAAM,EAAEQ,YAAY,CAAC;AAC/B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}