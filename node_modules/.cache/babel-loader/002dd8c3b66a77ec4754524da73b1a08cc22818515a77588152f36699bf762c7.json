{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { nextTick, defineComponent, ref, computed, onMounted, onUpdated, watch, onUnmounted } from 'vue';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { cloneElement } from '../_util/vnode';\nimport isVisible from '../vc-util/Dom/isVisible';\nimport { isSamePoint, restoreFocus, monitorResize } from './util';\nimport useBuffer from './hooks/useBuffer';\nimport isEqual from 'lodash-es/isEqual';\nexport var alignProps = {\n  align: Object,\n  target: [Object, Function],\n  onAlign: Function,\n  monitorBufferTime: Number,\n  monitorWindowResize: Boolean,\n  disabled: Boolean\n};\nfunction getElement(func) {\n  if (typeof func !== 'function') return null;\n  return func();\n}\nfunction getPoint(point) {\n  if (_typeof(point) !== 'object' || !point) return null;\n  return point;\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Align',\n  props: alignProps,\n  emits: ['align'],\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n      slots = _ref.slots;\n    var cacheRef = ref({});\n    var nodeRef = ref();\n    var _useBuffer = useBuffer(function () {\n        var latestDisabled = props.disabled,\n          latestTarget = props.target,\n          latestAlign = props.align,\n          latestOnAlign = props.onAlign;\n        if (!latestDisabled && latestTarget && nodeRef.value) {\n          var source = nodeRef.value;\n          var result;\n          var element = getElement(latestTarget);\n          var point = getPoint(latestTarget);\n          cacheRef.value.element = element;\n          cacheRef.value.point = point;\n          cacheRef.value.align = latestAlign;\n          // IE lose focus after element realign\n          // We should record activeElement and restore later\n          var _document = document,\n            activeElement = _document.activeElement;\n          // We only align when element is visible\n          if (element && isVisible(element)) {\n            result = alignElement(source, element, latestAlign);\n          } else if (point) {\n            result = alignPoint(source, point, latestAlign);\n          }\n          restoreFocus(activeElement, source);\n          if (latestOnAlign && result) {\n            latestOnAlign(source, result);\n          }\n          return true;\n        }\n        return false;\n      }, computed(function () {\n        return props.monitorBufferTime;\n      })),\n      _useBuffer2 = _slicedToArray(_useBuffer, 2),\n      _forceAlign = _useBuffer2[0],\n      cancelForceAlign = _useBuffer2[1];\n    // ===================== Effect =====================\n    // Listen for target updated\n    var resizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n    // Listen for source updated\n    var sourceResizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n    var goAlign = function goAlign() {\n      var target = props.target;\n      var element = getElement(target);\n      var point = getPoint(target);\n      if (nodeRef.value !== sourceResizeMonitor.value.element) {\n        sourceResizeMonitor.value.cancel();\n        sourceResizeMonitor.value.element = nodeRef.value;\n        sourceResizeMonitor.value.cancel = monitorResize(nodeRef.value, _forceAlign);\n      }\n      if (cacheRef.value.element !== element || !isSamePoint(cacheRef.value.point, point) || !isEqual(cacheRef.value.align, props.align)) {\n        _forceAlign();\n        // Add resize observer\n        if (resizeMonitor.value.element !== element) {\n          resizeMonitor.value.cancel();\n          resizeMonitor.value.element = element;\n          resizeMonitor.value.cancel = monitorResize(element, _forceAlign);\n        }\n      }\n    };\n    onMounted(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    onUpdated(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    // Listen for disabled change\n    watch(function () {\n      return props.disabled;\n    }, function (disabled) {\n      if (!disabled) {\n        _forceAlign();\n      } else {\n        cancelForceAlign();\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n    // Listen for window resize\n    var winResizeRef = ref(null);\n    watch(function () {\n      return props.monitorWindowResize;\n    }, function (monitorWindowResize) {\n      if (monitorWindowResize) {\n        if (!winResizeRef.value) {\n          winResizeRef.value = addEventListener(window, 'resize', _forceAlign);\n        }\n      } else if (winResizeRef.value) {\n        winResizeRef.value.remove();\n        winResizeRef.value = null;\n      }\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(function () {\n      resizeMonitor.value.cancel();\n      sourceResizeMonitor.value.cancel();\n      if (winResizeRef.value) winResizeRef.value.remove();\n      cancelForceAlign();\n    });\n    expose({\n      forceAlign: function forceAlign() {\n        return _forceAlign(true);\n      }\n    });\n    return function () {\n      var child = slots === null || slots === void 0 ? void 0 : slots.default();\n      if (child) {\n        return cloneElement(child[0], {\n          ref: nodeRef\n        }, true, true);\n      }\n      return null;\n    };\n  }\n});","map":{"version":3,"names":["_slicedToArray","_typeof","nextTick","defineComponent","ref","computed","onMounted","onUpdated","watch","onUnmounted","alignElement","alignPoint","addEventListener","cloneElement","isVisible","isSamePoint","restoreFocus","monitorResize","useBuffer","isEqual","alignProps","align","Object","target","Function","onAlign","monitorBufferTime","Number","monitorWindowResize","Boolean","disabled","getElement","func","getPoint","point","compatConfig","MODE","name","props","emits","setup","_ref","expose","slots","cacheRef","nodeRef","_useBuffer","latestDisabled","latestTarget","latestAlign","latestOnAlign","value","source","result","element","_document","document","activeElement","_useBuffer2","_forceAlign","cancelForceAlign","resizeMonitor","cancel","sourceResizeMonitor","goAlign","immediate","flush","winResizeRef","window","remove","forceAlign","child","default"],"sources":["/Users/dev/e-approver/node_modules/ant-design-vue/es/vc-align/Align.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { nextTick, defineComponent, ref, computed, onMounted, onUpdated, watch, onUnmounted } from 'vue';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { cloneElement } from '../_util/vnode';\nimport isVisible from '../vc-util/Dom/isVisible';\nimport { isSamePoint, restoreFocus, monitorResize } from './util';\nimport useBuffer from './hooks/useBuffer';\nimport isEqual from 'lodash-es/isEqual';\nexport var alignProps = {\n  align: Object,\n  target: [Object, Function],\n  onAlign: Function,\n  monitorBufferTime: Number,\n  monitorWindowResize: Boolean,\n  disabled: Boolean\n};\nfunction getElement(func) {\n  if (typeof func !== 'function') return null;\n  return func();\n}\nfunction getPoint(point) {\n  if (_typeof(point) !== 'object' || !point) return null;\n  return point;\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Align',\n  props: alignProps,\n  emits: ['align'],\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n      slots = _ref.slots;\n    var cacheRef = ref({});\n    var nodeRef = ref();\n    var _useBuffer = useBuffer(function () {\n        var latestDisabled = props.disabled,\n          latestTarget = props.target,\n          latestAlign = props.align,\n          latestOnAlign = props.onAlign;\n        if (!latestDisabled && latestTarget && nodeRef.value) {\n          var source = nodeRef.value;\n          var result;\n          var element = getElement(latestTarget);\n          var point = getPoint(latestTarget);\n          cacheRef.value.element = element;\n          cacheRef.value.point = point;\n          cacheRef.value.align = latestAlign;\n          // IE lose focus after element realign\n          // We should record activeElement and restore later\n          var _document = document,\n            activeElement = _document.activeElement;\n          // We only align when element is visible\n          if (element && isVisible(element)) {\n            result = alignElement(source, element, latestAlign);\n          } else if (point) {\n            result = alignPoint(source, point, latestAlign);\n          }\n          restoreFocus(activeElement, source);\n          if (latestOnAlign && result) {\n            latestOnAlign(source, result);\n          }\n          return true;\n        }\n        return false;\n      }, computed(function () {\n        return props.monitorBufferTime;\n      })),\n      _useBuffer2 = _slicedToArray(_useBuffer, 2),\n      _forceAlign = _useBuffer2[0],\n      cancelForceAlign = _useBuffer2[1];\n    // ===================== Effect =====================\n    // Listen for target updated\n    var resizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n    // Listen for source updated\n    var sourceResizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n    var goAlign = function goAlign() {\n      var target = props.target;\n      var element = getElement(target);\n      var point = getPoint(target);\n      if (nodeRef.value !== sourceResizeMonitor.value.element) {\n        sourceResizeMonitor.value.cancel();\n        sourceResizeMonitor.value.element = nodeRef.value;\n        sourceResizeMonitor.value.cancel = monitorResize(nodeRef.value, _forceAlign);\n      }\n      if (cacheRef.value.element !== element || !isSamePoint(cacheRef.value.point, point) || !isEqual(cacheRef.value.align, props.align)) {\n        _forceAlign();\n        // Add resize observer\n        if (resizeMonitor.value.element !== element) {\n          resizeMonitor.value.cancel();\n          resizeMonitor.value.element = element;\n          resizeMonitor.value.cancel = monitorResize(element, _forceAlign);\n        }\n      }\n    };\n    onMounted(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    onUpdated(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    // Listen for disabled change\n    watch(function () {\n      return props.disabled;\n    }, function (disabled) {\n      if (!disabled) {\n        _forceAlign();\n      } else {\n        cancelForceAlign();\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n    // Listen for window resize\n    var winResizeRef = ref(null);\n    watch(function () {\n      return props.monitorWindowResize;\n    }, function (monitorWindowResize) {\n      if (monitorWindowResize) {\n        if (!winResizeRef.value) {\n          winResizeRef.value = addEventListener(window, 'resize', _forceAlign);\n        }\n      } else if (winResizeRef.value) {\n        winResizeRef.value.remove();\n        winResizeRef.value = null;\n      }\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(function () {\n      resizeMonitor.value.cancel();\n      sourceResizeMonitor.value.cancel();\n      if (winResizeRef.value) winResizeRef.value.remove();\n      cancelForceAlign();\n    });\n    expose({\n      forceAlign: function forceAlign() {\n        return _forceAlign(true);\n      }\n    });\n    return function () {\n      var child = slots === null || slots === void 0 ? void 0 : slots.default();\n      if (child) {\n        return cloneElement(child[0], {\n          ref: nodeRef\n        }, true, true);\n      }\n      return null;\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}