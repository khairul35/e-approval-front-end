{"ast":null,"code":"import { getValue, updateValues } from '../utils/miscUtil';\nimport { getClosingViewDate, isSameYear, isSameMonth, isSameDecade } from '../utils/dateUtil';\nimport { watchEffect, computed, ref } from 'vue';\nfunction getStartEndDistance(startDate, endDate, picker, generateConfig) {\n  var startNext = getClosingViewDate(startDate, picker, generateConfig, 1);\n  function getDistance(compareFunc) {\n    if (compareFunc(startDate, endDate)) {\n      return 'same';\n    }\n    if (compareFunc(startNext, endDate)) {\n      return 'closing';\n    }\n    return 'far';\n  }\n  switch (picker) {\n    case 'year':\n      return getDistance(function (start, end) {\n        return isSameDecade(generateConfig, start, end);\n      });\n    case 'quarter':\n    case 'month':\n      return getDistance(function (start, end) {\n        return isSameYear(generateConfig, start, end);\n      });\n    default:\n      return getDistance(function (start, end) {\n        return isSameMonth(generateConfig, start, end);\n      });\n  }\n}\nfunction getRangeViewDate(values, index, picker, generateConfig) {\n  var startDate = getValue(values, 0);\n  var endDate = getValue(values, 1);\n  if (index === 0) {\n    return startDate;\n  }\n  if (startDate && endDate) {\n    var distance = getStartEndDistance(startDate, endDate, picker, generateConfig);\n    switch (distance) {\n      case 'same':\n        return startDate;\n      case 'closing':\n        return startDate;\n      default:\n        return getClosingViewDate(endDate, picker, generateConfig, -1);\n    }\n  }\n  return startDate;\n}\nexport default function useRangeViewDates(_ref) {\n  var values = _ref.values,\n    picker = _ref.picker,\n    defaultDates = _ref.defaultDates,\n    generateConfig = _ref.generateConfig;\n  var defaultViewDates = ref([getValue(defaultDates, 0), getValue(defaultDates, 1)]);\n  var viewDates = ref(null);\n  var startDate = computed(function () {\n    return getValue(values.value, 0);\n  });\n  var endDate = computed(function () {\n    return getValue(values.value, 1);\n  });\n  var getViewDate = function getViewDate(index) {\n    // If set default view date, use it\n    if (defaultViewDates.value[index]) {\n      return defaultViewDates.value[index];\n    }\n    return getValue(viewDates.value, index) || getRangeViewDate(values.value, index, picker.value, generateConfig.value) || startDate.value || endDate.value || generateConfig.value.getNow();\n  };\n  var startViewDate = ref(null);\n  var endViewDate = ref(null);\n  watchEffect(function () {\n    startViewDate.value = getViewDate(0);\n    endViewDate.value = getViewDate(1);\n  });\n  function setViewDate(viewDate, index) {\n    if (viewDate) {\n      var newViewDates = updateValues(viewDates.value, viewDate, index);\n      // Set view date will clean up default one\n      // Should always be an array\n      defaultViewDates.value = updateValues(defaultViewDates.value, null, index) || [null, null];\n      // Reset another one when not have value\n      var anotherIndex = (index + 1) % 2;\n      if (!getValue(values.value, anotherIndex)) {\n        newViewDates = updateValues(newViewDates, viewDate, anotherIndex);\n      }\n      viewDates.value = newViewDates;\n    } else if (startDate.value || endDate.value) {\n      // Reset all when has values when `viewDate` is `null` which means from open trigger\n      viewDates.value = null;\n    }\n  }\n  return [startViewDate, endViewDate, setViewDate];\n}","map":{"version":3,"names":["getValue","updateValues","getClosingViewDate","isSameYear","isSameMonth","isSameDecade","watchEffect","computed","ref","getStartEndDistance","startDate","endDate","picker","generateConfig","startNext","getDistance","compareFunc","start","end","getRangeViewDate","values","index","distance","useRangeViewDates","_ref","defaultDates","defaultViewDates","viewDates","value","getViewDate","getNow","startViewDate","endViewDate","setViewDate","viewDate","newViewDates","anotherIndex"],"sources":["/Users/dev/e-approver/node_modules/ant-design-vue/es/vc-picker/hooks/useRangeViewDates.js"],"sourcesContent":["import { getValue, updateValues } from '../utils/miscUtil';\nimport { getClosingViewDate, isSameYear, isSameMonth, isSameDecade } from '../utils/dateUtil';\nimport { watchEffect, computed, ref } from 'vue';\nfunction getStartEndDistance(startDate, endDate, picker, generateConfig) {\n  var startNext = getClosingViewDate(startDate, picker, generateConfig, 1);\n  function getDistance(compareFunc) {\n    if (compareFunc(startDate, endDate)) {\n      return 'same';\n    }\n    if (compareFunc(startNext, endDate)) {\n      return 'closing';\n    }\n    return 'far';\n  }\n  switch (picker) {\n    case 'year':\n      return getDistance(function (start, end) {\n        return isSameDecade(generateConfig, start, end);\n      });\n    case 'quarter':\n    case 'month':\n      return getDistance(function (start, end) {\n        return isSameYear(generateConfig, start, end);\n      });\n    default:\n      return getDistance(function (start, end) {\n        return isSameMonth(generateConfig, start, end);\n      });\n  }\n}\nfunction getRangeViewDate(values, index, picker, generateConfig) {\n  var startDate = getValue(values, 0);\n  var endDate = getValue(values, 1);\n  if (index === 0) {\n    return startDate;\n  }\n  if (startDate && endDate) {\n    var distance = getStartEndDistance(startDate, endDate, picker, generateConfig);\n    switch (distance) {\n      case 'same':\n        return startDate;\n      case 'closing':\n        return startDate;\n      default:\n        return getClosingViewDate(endDate, picker, generateConfig, -1);\n    }\n  }\n  return startDate;\n}\nexport default function useRangeViewDates(_ref) {\n  var values = _ref.values,\n    picker = _ref.picker,\n    defaultDates = _ref.defaultDates,\n    generateConfig = _ref.generateConfig;\n  var defaultViewDates = ref([getValue(defaultDates, 0), getValue(defaultDates, 1)]);\n  var viewDates = ref(null);\n  var startDate = computed(function () {\n    return getValue(values.value, 0);\n  });\n  var endDate = computed(function () {\n    return getValue(values.value, 1);\n  });\n  var getViewDate = function getViewDate(index) {\n    // If set default view date, use it\n    if (defaultViewDates.value[index]) {\n      return defaultViewDates.value[index];\n    }\n    return getValue(viewDates.value, index) || getRangeViewDate(values.value, index, picker.value, generateConfig.value) || startDate.value || endDate.value || generateConfig.value.getNow();\n  };\n  var startViewDate = ref(null);\n  var endViewDate = ref(null);\n  watchEffect(function () {\n    startViewDate.value = getViewDate(0);\n    endViewDate.value = getViewDate(1);\n  });\n  function setViewDate(viewDate, index) {\n    if (viewDate) {\n      var newViewDates = updateValues(viewDates.value, viewDate, index);\n      // Set view date will clean up default one\n      // Should always be an array\n      defaultViewDates.value = updateValues(defaultViewDates.value, null, index) || [null, null];\n      // Reset another one when not have value\n      var anotherIndex = (index + 1) % 2;\n      if (!getValue(values.value, anotherIndex)) {\n        newViewDates = updateValues(newViewDates, viewDate, anotherIndex);\n      }\n      viewDates.value = newViewDates;\n    } else if (startDate.value || endDate.value) {\n      // Reset all when has values when `viewDate` is `null` which means from open trigger\n      viewDates.value = null;\n    }\n  }\n  return [startViewDate, endViewDate, setViewDate];\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}